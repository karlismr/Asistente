{% extends 'chat/base.html' %}
{% load static %}

{% block content %}
<div class="auth-container">
    <h2 class="auth-title">Configurar Asistente</h2>

    <form method="POST" enctype="multipart/form-data" class="auth-form">
        {% csrf_token %}

        <div>
            <label>Nombre del Asistente:</label>
            {{ form.nombre }}
        </div>

        <div>
            <label>Personalidad del Asistente:</label>
            {{ form.personalidad }}
            <p style="font-size: 0.75rem; color: #4b5563; margin-top: 5px;">
                Escribe cómo quieres que se comporte (ej: "Eres un pirata gracioso.
                Si dejas este campo en blanco, se comportara como Satoru Gojo de Jujustu Kaisen").
            </p>
        </div>

        <div>
            <label>Imagen del Asistente:</label>
            {{ form.imagen }}
            
            {% if form.instance.imagen %}
            <div style="text-align: center; margin-top: 15px;">
                <p style="font-size: 0.8rem; color: #6b7280; margin-bottom: 5px;">Imagen actual:</p>
                <img src="{{ form.instance.imagen.url }}" 
                     style="width: 100px; height: 100px; object-fit: cover; border-radius: 50%; border: 2px solid white; shadow: 0 4px 6px rgba(0,0,0,0.1);">
            </div>
            {% endif %}
        </div>

        <button type="submit" class="btn-primary-custom">Guardar Cambios</button>
    </form>

    <div class="auth-footer">
        <a href="{% url 'chat_view' %}">← Volver al chat</a>
    </div>

    <hr style="margin: 25px 0; border: 0; border-top: 1px solid #d1d5db;">

    <div style="background: rgba(255, 255, 255, 0.5); padding: 20px; border-radius: 12px; text-align: center;">
        <h3 style="font-size: 1.1rem; font-weight: 600; color: #374151; margin-bottom: 5px;">Ajustes de Cuenta</h3>
        <p style="font-size: 0.85rem; color: #4b5563; margin-bottom: 15px;">
            Sesión iniciada como: <strong>{{ user.username }}</strong>
        </p>
        
        <form action="{% url 'logout' %}" method="post">
            {% csrf_token %}
            <button type="submit" class="btn-logout">Cerrar Sesión</button>
        </form>
    </div>
</div>
{% endblock %}